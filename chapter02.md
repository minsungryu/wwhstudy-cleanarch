# 02 의존성 역전하기

## 단일 책임 원칙

컴포넌트를 변경하는 이유는 오직 하나뿐이어야 한다.

‘책임’은 사실 ‘오로지 한 가지 일만 하는 것’보다는 ‘변경할 이유’로 해석해야 한다.

## 부수효과에 관한 이야기

어떤 클라이언트는 과거 컴포넌트를 변경했을 때 언제나 다른 무언가가 망가졌기 때문에 변경에 대한 부수효과를 우려했다.

## 의존성 역전 원칙

계층형 아키텍처에서 계층 간 의존성은 항상 다음 계층인 아래 방향을 가리킨다.

그러므로 영속성 계층을 변경할 때마다 잠재적으로 도메인 계층도 변경해야 한다.

의존성 역전 원칙에 의해 인터페이스를 도입함으로써 코드상의 어떤 의존성이든 그 방향을 바꿀 수 있다.

## 클린 아키텍처

로버트 C. 마틴은 클린 아키텍처에서 설계가 비즈니스 규칙의 테스트를 용이하게 하고, 비즈니스 규칙은 프레임워크, 데이터베이스, UI 기술, 그 밖의 외부 애플리케이션이나 인터페이스로부터 독립적일 수 있다고 이야기했다.

이는 도메인 코드가 바깥으로 향하는 어떤 의존성도 없어야 함을 의미하고, 의존성 역전 원칙의 도움으로 모든 의존성이 도메인 코드를 향하고 있다.

도메인 코드에서는 어떤 영속성 프레임워크나 UI 프레임워크가 사용되는지 알 수 없기 때문에 비즈니스 규칙에 집중할 수 있다.

이에 대한 대가로 애플리케이션 엔티티에 대한 모델을 각 계층에서 유지보수해야 한다.

## 육각형 아키텍처(헥사고날 아키텍처)

포트와 어댑터 아키텍처라고도 불린다.

모든 의존성은 코어로 향한다.

애플리케이션 코어와 어댑터들 간의 통신이 가능하려면 각각의 포트를 제공해야 한다.

---

질문1. 예시로 나오는 그림은 하나의 엔티티에 대해서 설명하고 있다. 다수의 엔티티, 다수의 도메인에서 아키텍처는 어떻게 그림을 그려야할까?

질문2. 유지보수성이 좋아진다는 것은 어떤 의미인가? 다수의 모델을 선언하고 매핑해야하는데 이에 대한 생각은?